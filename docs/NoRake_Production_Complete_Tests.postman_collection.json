{
  "info": {
    "name": "NoRake Production API - Complete Tests",
    "description": "–ü–æ–ª–Ω–∞—è –∫–æ–ª–ª–µ–∫—Ü–∏—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è production API NoRake Backend (~37 endpoints)",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "base_url",
      "value": "https://api.norake.ru/api/v1",
      "type": "string"
    },
    {
      "key": "admin_email",
      "value": "admin@norake.ru",
      "type": "string"
    },
    {
      "key": "admin_password",
      "value": "NoRake2025!Secure",
      "type": "string"
    },
    {
      "key": "access_token",
      "value": "",
      "type": "string"
    },
    {
      "key": "refresh_token",
      "value": "",
      "type": "string"
    },
    {
      "key": "test_user_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "test_workspace_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "test_issue_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "test_comment_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "test_template_id",
      "value": "",
      "type": "string"
    }
  ],
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{access_token}}",
        "type": "string"
      }
    ]
  },
  "item": [
    {
      "name": "üè• Health Checks",
      "item": [
        {
          "name": "Health Check",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/health",
              "host": ["{{base_url}}"],
              "path": ["health"]
            },
            "description": "–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ (app + db)"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response has success=true', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.success).to.eql(true);",
                  "});",
                  "",
                  "pm.test('DB is healthy', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data.db).to.eql('ok');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Liveness Check",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/health/live",
              "host": ["{{base_url}}"],
              "path": ["health", "live"]
            },
            "description": "–ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∂–∏–∑–Ω–µ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('App is alive', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data.app).to.eql('ok');",
                  "});"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "üîê Authentication",
      "item": [
        {
          "name": "Admin Login",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/x-www-form-urlencoded"
              }
            ],
            "body": {
              "mode": "urlencoded",
              "urlencoded": [
                {
                  "key": "username",
                  "value": "{{admin_email}}",
                  "type": "text"
                },
                {
                  "key": "password",
                  "value": "{{admin_password}}",
                  "type": "text"
                }
              ]
            },
            "url": {
              "raw": "{{base_url}}/auth/login",
              "host": ["{{base_url}}"],
              "path": ["auth", "login"]
            },
            "description": "–í—Ö–æ–¥ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –≤ —Å–∏—Å—Ç–µ–º—É"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response contains access_token', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('access_token');",
                  "    pm.expect(jsonData).to.have.property('refresh_token');",
                  "    pm.collectionVariables.set('access_token', jsonData.access_token);",
                  "    pm.collectionVariables.set('refresh_token', jsonData.refresh_token);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Refresh Token",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "refresh-token",
                "value": "{{refresh_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/auth/refresh",
              "host": ["{{base_url}}"],
              "path": ["auth", "refresh"]
            },
            "description": "–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ access —Ç–æ–∫–µ–Ω–∞ —á–µ—Ä–µ–∑ refresh —Ç–æ–∫–µ–Ω"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('New tokens received', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('access_token', jsonData.access_token);",
                  "    pm.collectionVariables.set('refresh_token', jsonData.refresh_token);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Get Current User",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/auth/me",
              "host": ["{{base_url}}"],
              "path": ["auth", "me"]
            },
            "description": "–ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç–µ–∫—É—â–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('User data present', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data).to.have.property('id');",
                  "    pm.expect(jsonData.data).to.have.property('email');",
                  "    pm.collectionVariables.set('test_user_id', jsonData.data.id);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Logout",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{base_url}}/auth/logout?clear_cookies=true",
              "host": ["{{base_url}}"],
              "path": ["auth", "logout"],
              "query": [
                {
                  "key": "clear_cookies",
                  "value": "true"
                }
              ]
            },
            "description": "–í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã —Å –æ—á–∏—Å—Ç–∫–æ–π —Ç–æ–∫–µ–Ω–æ–≤"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "üìù Registration",
      "item": [
        {
          "name": "Register New User",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"testuser@example.com\",\n  \"password\": \"SecurePassword123!\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/register",
              "host": ["{{base_url}}"],
              "path": ["register"]
            },
            "description": "–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 201', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test('User created with tokens', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data).to.have.property('id');",
                  "});"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "üë§ Users",
      "item": [
        {
          "name": "Get My Profile",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/users/profile",
              "host": ["{{base_url}}"],
              "path": ["users", "profile"]
            },
            "description": "–ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Get User by ID (Admin Only)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/users/{{test_user_id}}",
              "host": ["{{base_url}}"],
              "path": ["users", "{{test_user_id}}"]
            },
            "description": "–ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ ID (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω—ã)"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200 or 403', function () {",
                  "    pm.expect([200, 403]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Update My Profile",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"username\": \"updated_username\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/users/profile",
              "host": ["{{base_url}}"],
              "path": ["users", "profile"]
            },
            "description": "–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–≤–æ–µ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "üîß Workspaces",
      "item": [
        {
          "name": "Create Workspace",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Test Workspace\",\n  \"description\": \"Workspace for testing\",\n  \"visibility\": \"private\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/workspaces",
              "host": ["{{base_url}}"],
              "path": ["workspaces"]
            },
            "description": "–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ workspace"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 201', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test('Workspace created', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data).to.have.property('id');",
                  "    pm.collectionVariables.set('test_workspace_id', jsonData.data.id);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "List My Workspaces",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/workspaces/me",
              "host": ["{{base_url}}"],
              "path": ["workspaces", "me"]
            },
            "description": "–°–ø–∏—Å–æ–∫ –º–æ–∏—Ö workspaces"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Workspaces array present', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data).to.be.an('array');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Get Workspace by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/workspaces/{{test_workspace_id}}",
              "host": ["{{base_url}}"],
              "path": ["workspaces", "{{test_workspace_id}}"]
            },
            "description": "–ü–æ–ª—É—á–µ–Ω–∏–µ workspace –ø–æ ID"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Update Workspace",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Updated Workspace Name\",\n  \"visibility\": \"public\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/workspaces/{{test_workspace_id}}",
              "host": ["{{base_url}}"],
              "path": ["workspaces", "{{test_workspace_id}}"]
            },
            "description": "–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ workspace (—Ç–æ–ª—å–∫–æ owner/admin)"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Add Member to Workspace",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"user_id\": \"{{test_user_id}}\",\n  \"role\": \"member\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/workspaces/{{test_workspace_id}}/members",
              "host": ["{{base_url}}"],
              "path": ["workspaces", "{{test_workspace_id}}", "members"]
            },
            "description": "–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞ –≤ workspace"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 201', function () {",
                  "    pm.response.to.have.status(201);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Remove Member from Workspace",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/workspaces/{{test_workspace_id}}/members/{{test_user_id}}",
              "host": ["{{base_url}}"],
              "path": ["workspaces", "{{test_workspace_id}}", "members", "{{test_user_id}}"]
            },
            "description": "–£–¥–∞–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞ –∏–∑ workspace"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 204', function () {",
                  "    pm.response.to.have.status(204);",
                  "});"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "üö® Issues - Public",
      "item": [
        {
          "name": "List Public Issues",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/issues?limit=20&offset=0",
              "host": ["{{base_url}}"],
              "path": ["issues"],
              "query": [
                {
                  "key": "limit",
                  "value": "20"
                },
                {
                  "key": "offset",
                  "value": "0"
                },
                {
                  "key": "status",
                  "value": "red",
                  "disabled": true
                },
                {
                  "key": "category",
                  "value": "software",
                  "disabled": true
                }
              ]
            },
            "description": "–ü—É–±–ª–∏—á–Ω—ã–π —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–±–ª–µ–º —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Issues array present', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data).to.be.an('array');",
                  "    if (jsonData.data.length > 0) {",
                  "        pm.collectionVariables.set('test_issue_id', jsonData.data[0].id);",
                  "    }",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Get Issue by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/issues/{{test_issue_id}}",
              "host": ["{{base_url}}"],
              "path": ["issues", "{{test_issue_id}}"]
            },
            "description": "–ü–æ–ª—É—á–µ–Ω–∏–µ –¥–µ—Ç–∞–ª–µ–π –ø—Ä–æ–±–ª–µ–º—ã"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200 or 404', function () {",
                  "    pm.expect([200, 404]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Get Issues History",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/issues/history?limit=10",
              "host": ["{{base_url}}"],
              "path": ["issues", "history"],
              "query": [
                {
                  "key": "limit",
                  "value": "10"
                }
              ]
            },
            "description": "–ò—Å—Ç–æ—Ä–∏—è –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Ä–µ—à—ë–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "üö® Issues - Protected",
      "item": [
        {
          "name": "Create Issue",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Test Issue from Postman\",\n  \"description\": \"This is a test issue created via API\",\n  \"category\": \"software\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/issues",
              "host": ["{{base_url}}"],
              "path": ["issues"]
            },
            "description": "–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –ø—Ä–æ–±–ª–µ–º—ã"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 201', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test('Issue created', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data).to.have.property('id');",
                  "    pm.collectionVariables.set('test_issue_id', jsonData.data.id);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Resolve Issue",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"solution\": \"Problem resolved by restarting the service\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/issues/{{test_issue_id}}/resolve",
              "host": ["{{base_url}}"],
              "path": ["issues", "{{test_issue_id}}", "resolve"]
            },
            "description": "–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã (—Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä)"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200 or 404', function () {",
                  "    pm.expect([200, 404]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "üí¨ Comments - Public",
      "item": [
        {
          "name": "List Issue Comments",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/issues/{{test_issue_id}}/comments",
              "host": ["{{base_url}}"],
              "path": ["issues", "{{test_issue_id}}", "comments"]
            },
            "description": "–°–ø–∏—Å–æ–∫ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –ø—Ä–æ–±–ª–µ–º—ã"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200 or 404', function () {",
                  "    pm.expect([200, 404]).to.include(pm.response.code);",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    pm.test('Comments array present', function () {",
                  "        const jsonData = pm.response.json();",
                  "        pm.expect(jsonData.data).to.be.an('array');",
                  "        if (jsonData.data.length > 0) {",
                  "            pm.collectionVariables.set('test_comment_id', jsonData.data[0].id);",
                  "        }",
                  "    });",
                  "}"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "üí¨ Comments - Protected",
      "item": [
        {
          "name": "Create Comment",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"content\": \"This is a test comment\",\n  \"is_solution\": false\n}"
            },
            "url": {
              "raw": "{{base_url}}/issues/{{test_issue_id}}/comments",
              "host": ["{{base_url}}"],
              "path": ["issues", "{{test_issue_id}}", "comments"]
            },
            "description": "–°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è –∫ –ø—Ä–æ–±–ª–µ–º–µ"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 201 or 404', function () {",
                  "    pm.expect([201, 404]).to.include(pm.response.code);",
                  "});",
                  "",
                  "if (pm.response.code === 201) {",
                  "    pm.test('Comment created', function () {",
                  "        const jsonData = pm.response.json();",
                  "        pm.collectionVariables.set('test_comment_id', jsonData.data.id);",
                  "    });",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Delete Comment",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/issues/{{test_issue_id}}/comments/{{test_comment_id}}",
              "host": ["{{base_url}}"],
              "path": ["issues", "{{test_issue_id}}", "comments", "{{test_comment_id}}"]
            },
            "description": "–£–¥–∞–ª–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è (—Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä –∏–ª–∏ admin)"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 204 or 404', function () {",
                  "    pm.expect([204, 404]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "üìã Templates",
      "item": [
        {
          "name": "List Templates",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/templates?is_active=true",
              "host": ["{{base_url}}"],
              "path": ["templates"],
              "query": [
                {
                  "key": "is_active",
                  "value": "true"
                },
                {
                  "key": "category",
                  "value": "software",
                  "disabled": true
                },
                {
                  "key": "visibility",
                  "value": "public",
                  "disabled": true
                }
              ]
            },
            "description": "–°–ø–∏—Å–æ–∫ —à–∞–±–ª–æ–Ω–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Templates array present', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data).to.be.an('array');",
                  "    if (jsonData.data.length > 0) {",
                  "        pm.collectionVariables.set('test_template_id', jsonData.data[0].id);",
                  "    }",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Get Template by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/templates/{{test_template_id}}",
              "host": ["{{base_url}}"],
              "path": ["templates", "{{test_template_id}}"]
            },
            "description": "–ü–æ–ª—É—á–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞ –ø–æ ID"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200 or 404', function () {",
                  "    pm.expect([200, 404]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Create Template",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Test Template\",\n  \"description\": \"Template for testing\",\n  \"category\": \"software\",\n  \"visibility\": \"public\",\n  \"fields\": {\n    \"problem_type\": \"text\",\n    \"steps\": \"array\",\n    \"solution\": \"text\"\n  }\n}"
            },
            "url": {
              "raw": "{{base_url}}/templates",
              "host": ["{{base_url}}"],
              "path": ["templates"]
            },
            "description": "–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —à–∞–±–ª–æ–Ω–∞"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 201', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test('Template created', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('test_template_id', jsonData.data.id);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Update Template",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Updated Template Title\",\n  \"description\": \"Updated description\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/templates/{{test_template_id}}",
              "host": ["{{base_url}}"],
              "path": ["templates", "{{test_template_id}}"]
            },
            "description": "–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞ (—Ç–æ–ª—å–∫–æ –≤–ª–∞–¥–µ–ª–µ—Ü)"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200 or 404', function () {",
                  "    pm.expect([200, 404]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Activate Template",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{base_url}}/templates/{{test_template_id}}/activate",
              "host": ["{{base_url}}"],
              "path": ["templates", "{{test_template_id}}", "activate"]
            },
            "description": "–ê–∫—Ç–∏–≤–∞—Ü–∏—è —à–∞–±–ª–æ–Ω–∞"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200 or 404', function () {",
                  "    pm.expect([200, 404]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Deactivate Template",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{base_url}}/templates/{{test_template_id}}/deactivate",
              "host": ["{{base_url}}"],
              "path": ["templates", "{{test_template_id}}", "deactivate"]
            },
            "description": "–î–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è —à–∞–±–ª–æ–Ω–∞"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200 or 404', function () {",
                  "    pm.expect([200, 404]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Delete Template",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/templates/{{test_template_id}}",
              "host": ["{{base_url}}"],
              "path": ["templates", "{{test_template_id}}"]
            },
            "description": "–£–¥–∞–ª–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞ (soft delete)"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200 or 404', function () {",
                  "    pm.expect([200, 404]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "üîç Search",
      "item": [
        {
          "name": "Search Public",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"query\": \"database connection error\",\n  \"limit\": 10,\n  \"pattern\": \"match\",\n  \"filters\": {\n    \"categories\": [\"software\"],\n    \"statuses\": [\"green\"]\n  }\n}"
            },
            "url": {
              "raw": "{{base_url}}/search/public",
              "host": ["{{base_url}}"],
              "path": ["search", "public"]
            },
            "description": "–ü—É–±–ª–∏—á–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ —Ä–µ—à–µ–Ω–∏—è–º"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Search results present', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data).to.have.property('results');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Search with AI (Protected)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"query\": \"how to fix authentication error\",\n  \"workspace_id\": \"{{test_workspace_id}}\",\n  \"use_ai\": true,\n  \"limit\": 10,\n  \"pattern\": \"match\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/search",
              "host": ["{{base_url}}"],
              "path": ["search"]
            },
            "description": "–ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–∏—Å–∫ —Å AI (DB + RAG + MCP)"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('AI search results present', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data).to.have.property('results');",
                  "    pm.expect(jsonData.data).to.have.property('stats');",
                  "});"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "üîÑ N8n Workflows",
      "item": [
        {
          "name": "Create Workflow",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"workflow_name\": \"Test Workflow\",\n  \"workflow_type\": \"automation\",\n  \"webhook_url\": \"https://n8n.example.com/webhook/test\",\n  \"trigger_config\": {\n    \"event\": \"issue_created\",\n    \"conditions\": {}\n  },\n  \"n8n_workflow_id\": \"wf_12345\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/workflows/{{test_workspace_id}}",
              "host": ["{{base_url}}"],
              "path": ["workflows", "{{test_workspace_id}}"]
            },
            "description": "–°–æ–∑–¥–∞–Ω–∏–µ n8n workflow –¥–ª—è workspace"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 201 or 404', function () {",
                  "    pm.expect([201, 404]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "List Workspace Workflows",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/workflows/{{test_workspace_id}}?is_active=true",
              "host": ["{{base_url}}"],
              "path": ["workflows", "{{test_workspace_id}}"],
              "query": [
                {
                  "key": "is_active",
                  "value": "true"
                }
              ]
            },
            "description": "–°–ø–∏—Å–æ–∫ workflows workspace"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200 or 404', function () {",
                  "    pm.expect([200, 404]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "üîí Protected Test",
      "item": [
        {
          "name": "Test Protected Endpoint",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/protected/test",
              "host": ["{{base_url}}"],
              "path": ["protected", "test"]
            },
            "description": "–¢–µ—Å—Ç–æ–≤—ã–π –∑–∞—â–∏—â—ë–Ω–Ω—ã–π endpoint"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Admin Only Endpoint",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/protected/admin-only",
              "host": ["{{base_url}}"],
              "path": ["protected", "admin-only"]
            },
            "description": "Endpoint —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200 or 403', function () {",
                  "    pm.expect([200, 403]).to.include(pm.response.code);",
                  "});"
                ]
              }
            }
          ]
        }
      ]
    }
  ]
}
