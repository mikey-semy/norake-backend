# üìã –ü–ª–∞–Ω —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ Equiply MVP

## üéØ –¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞

**Equiply** ‚Äî —Å–∏—Å—Ç–µ–º–∞ –∫–æ–ª–ª–µ–∫—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏ –¥–ª—è —Ä–µ—à–µ–Ω–∏—è –∏ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º. –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥–∞–º —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å–æ —Å—Ç–∞—Ç—É—Å–∞–º–∏ üî¥ (—Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–º–æ—â—å) –∏ üü¢ (—Ä–µ—à–µ–Ω–æ), —Å–æ—Ö—Ä–∞–Ω—è—è –∏—Å—Ç–æ—Ä–∏—é —Ä–µ—à–µ–Ω–∏–π –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –æ—à–∏–±–æ–∫.

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- ‚úÖ 4-—Å–ª–æ–π–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (Router ‚Üí Service ‚Üí Repository ‚Üí Model)
- ‚úÖ PostgreSQL + Redis + FastAPI
- ‚úÖ Dependency Injection —á–µ—Ä–µ–∑ `Depends()`
- ‚úÖ –ì–ª–æ–±–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π
- ‚úÖ Docker + docker-compose –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- ‚úÖ Alembic –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–π –ë–î
- ‚úÖ UV –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
- ‚úÖ Logging –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (Black, isort)

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- ‚úÖ JWT-–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (access + refresh —Ç–æ–∫–µ–Ω—ã)
- ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (`POST /api/v1/register`)
- ‚úÖ –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É (`POST /api/v1/auth/login`)
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ (`POST /api/v1/auth/refresh`)
- ‚úÖ –í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã (`POST /api/v1/auth/logout`)
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (`GET /api/v1/auth/me`)
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ cookies –¥–ª—è —Ç–æ–∫–µ–Ω–æ–≤
- ‚úÖ Redis –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–≤ –∏ blacklist
- ‚úÖ –ú–æ–¥–µ–ª–∏: `UserModel`, `UserRoleModel`, `RoleCode` (admin/user)
- ‚úÖ Argon2 –¥–ª—è —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –ø–∞—Ä–æ–ª–µ–π

## üöÄ –ü–ª–∞–Ω —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ MVP (–æ–±–Ω–æ–≤–ª–µ–Ω–æ)

### –§–∞–∑–∞ 1: –Ø–¥—Ä–æ —Å–∏—Å—Ç–µ–º—ã –ø—Ä–æ–±–ª–µ–º (Issues) ‚Äî 2-3 –¥–Ω—è

#### 1.1 –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö (2-4 —á–∞—Å–∞)
**–§–∞–π–ª**: `src/models/v1/issues.py`

**–ó–∞–¥–∞—á–∏**:
- [ ] –°–æ–∑–¥–∞—Ç—å enum `IssueStatus` —Å –¥–≤—É–º—è –∑–Ω–∞—á–µ–Ω–∏—è–º–∏: `RED` ("red"), `GREEN` ("green")
- [ ] –°–æ–∑–¥–∞—Ç—å enum `IssueVisibility` —Å —Ç—Ä–µ–º—è –∑–Ω–∞—á–µ–Ω–∏—è–º–∏: `PUBLIC` ("public"), `PRIVATE` ("private"), `TEAM` ("team")
- [ ] –°–æ–∑–¥–∞—Ç—å –º–æ–¥–µ–ª—å `IssueModel` (–Ω–∞—Å–ª–µ–¥—É–µ—Ç `BaseModel`):
  - `title: str` ‚Äî –∑–∞–≥–æ–ª–æ–≤–æ–∫ –ø—Ä–æ–±–ª–µ–º—ã
  - `description: str` ‚Äî –ø–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
  - `category: str` ‚Äî –∫–∞—Ç–µ–≥–æ—Ä–∏—è (hardware, software, process)
  - `status: IssueStatus` ‚Äî —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é RED)
  - `visibility: IssueVisibility` ‚Äî –≤–∏–¥–∏–º–æ—Å—Ç—å (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é PRIVATE)
  - `template_id: Optional[UUID]` ‚Äî Foreign Key –Ω–∞ `templates.id` (–µ—Å–ª–∏ —Å–æ–∑–¥–∞–Ω–æ –ø–æ —à–∞–±–ª–æ–Ω—É)
  - `solution: Optional[str]` ‚Äî —Ç–µ–∫—Å—Ç —Ä–µ—à–µ–Ω–∏—è (NULL –¥–æ —Ä–µ—à–µ–Ω–∏—è)
  - `author_id: UUID` ‚Äî Foreign Key –Ω–∞ `users.id`
  - `team_id: Optional[UUID]` ‚Äî Foreign Key –Ω–∞ `teams.id` (–¥–ª—è TEAM visibility, –±—É–¥–µ—Ç –≤ v0.2)
  - `resolved_at: Optional[datetime]` ‚Äî –¥–∞—Ç–∞ —Ä–µ—à–µ–Ω–∏—è
  - `created_at`, `updated_at` ‚Äî –Ω–∞—Å–ª–µ–¥—É—é—Ç—Å—è –æ—Ç `BaseModel`
- [ ] –î–æ–±–∞–≤–∏—Ç—å relationship –∫ `UserModel` (`author: Mapped["UserModel"]`)
- [ ] –î–æ–±–∞–≤–∏—Ç—å relationship –∫ `TemplateModel` (`template: Mapped[Optional["TemplateModel"]]`)
- [ ] –î–æ–±–∞–≤–∏—Ç—å property `is_resolved` (–ø—Ä–æ–≤–µ—Ä–∫–∞ `status == GREEN`)
- [ ] –î–æ–±–∞–≤–∏—Ç—å property `is_public` (–ø—Ä–æ–≤–µ—Ä–∫–∞ `visibility == PUBLIC`)
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Ä—É—Å—Å–∫–æ–º (Google style docstrings)

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: –ù–µ—Ç

---

#### 1.2 Pydantic-—Å—Ö–µ–º—ã (1-2 —á–∞—Å–∞)
**–î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è**: `src/schemas/v1/issues/`

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞**:
```
issues/
‚îú‚îÄ‚îÄ __init__.py       # –≠–∫—Å–ø–æ—Ä—Ç—ã
‚îú‚îÄ‚îÄ base.py           # –ë–∞–∑–æ–≤—ã–µ —Å—Ö–µ–º—ã (IssueBaseSchema)
‚îú‚îÄ‚îÄ requests.py       # –í—Ö–æ–¥–Ω—ã–µ —Å—Ö–µ–º—ã (Create, Update, Resolve, Query)
‚îî‚îÄ‚îÄ responses.py      # –í—ã—Ö–æ–¥–Ω—ã–µ —Å—Ö–µ–º—ã (Detail, List, Response)
```

**–°—Ö–µ–º—ã**:

**base.py**:
- `IssueBaseSchema`: –æ–±—â–∏–µ –ø–æ–ª—è (title, description, category)
- `IssueStatusSchema`: –¥–ª—è —Å—Ç–∞—Ç—É—Å–∞ (status, resolved_at)

**requests.py**:
- `IssueCreateSchema(IssueBaseSchema)`: title, description, category
- `IssueResolveSchema`: solution (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ)
- `IssueQuerySchema`: —Ñ–∏–ª—å—Ç—Ä—ã (status, category, search, author_id)

**responses.py**:
- `IssueDetailSchema`: –≤—Å–µ –ø–æ–ª—è + author (UserDetailSchema), timestamps
- `IssueListItemSchema`: —Å–æ–∫—Ä–∞—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –¥–ª—è —Å–ø–∏—Å–∫–æ–≤
- `IssueResponseSchema(BaseResponseSchema)`: –æ–±–µ—Ä—Ç–∫–∞ –¥–ª—è API
- `IssueListResponseSchema`: –¥–ª—è —Å–ø–∏—Å–∫–∞ –ø—Ä–æ–±–ª–µ–º + –ø–∞–≥–∏–Ω–∞—Ü–∏—è

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: 1.1 (–º–æ–¥–µ–ª–∏)

---

#### 1.11 –ú–æ–¥–µ–ª–∏ –¥–ª—è —à–∞–±–ª–æ–Ω–æ–≤ (2-3 —á–∞—Å–∞)
**–§–∞–π–ª**: `src/models/v1/templates.py`

**–ú–æ–¥–µ–ª–∏**:
- `TemplateModel` ‚Äî —à–∞–±–ª–æ–Ω –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–±–ª–µ–º
- `UserTemplateModel` ‚Äî –∏–∑–±—Ä–∞–Ω–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–ü–æ–ª—è TemplateModel**:
- title, description, category
- fields (JSONB) ‚Äî –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –ø–æ–ª—è —à–∞–±–ª–æ–Ω–∞
- visibility, author_id, team_id
- usage_count, is_active

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: 1.1 (IssueModel)

---

#### 1.12 –ú–æ–¥–µ–ª–∏ –¥–ª—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ (1-2 —á–∞—Å–∞)
**–§–∞–π–ª**: `src/models/v1/issue_comments.py`

**–ú–æ–¥–µ–ª–∏**:
- `IssueCommentModel` ‚Äî –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –ø—Ä–æ–±–ª–µ–º–∞–º

**–ü–æ–ª—è**:
- issue_id, author_id, content
- is_solution (–æ—Ç–º–µ—Ç–∫–∞ "—ç—Ç–æ —Ä–µ—à–µ–Ω–∏–µ")
- parent_id (–≤–ª–æ–∂–µ–Ω–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏)

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: 1.1 (IssueModel)

---

#### 1.2 Pydantic-—Å—Ö–µ–º—ã (—Ç–µ–ø–µ—Ä—å 3-4 —á–∞—Å–∞)
**–§–∞–π–ª**: `src/repository/v1/issues.py`

**–ö–ª–∞—Å—Å**: `IssueRepository(BaseRepository[IssueModel])`

**–ú–µ—Ç–æ–¥—ã**:
- [ ] `get_by_status(status: IssueStatus) -> List[IssueModel]`
- [ ] `get_by_category(category: str) -> List[IssueModel]`
- [ ] `get_history(limit: int = 100) -> List[IssueModel]` ‚Äî —Ç–æ–ª—å–∫–æ GREEN
- [ ] `search_by_text(query: str) -> List[IssueModel]` ‚Äî –ø–æ–∏—Å–∫ –ø–æ title/description
- [ ] `get_user_issues(user_id: UUID) -> List[IssueModel]`
- [ ] `resolve_issue(issue_id: UUID, solution: str) -> IssueModel`
  - –û–±–Ω–æ–≤–∏—Ç—å status ‚Üí GREEN, resolved_at ‚Üí NOW(), solution

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `filter_by()` –∏ `filter_by_ordered()` –∏–∑ `BaseRepository`
- –î–ª—è –ø–æ–∏—Å–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `ILIKE` —á–µ—Ä–µ–∑ SQLAlchemy
- –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ (`async def`)

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: 1.1 (–º–æ–¥–µ–ª–∏)

---

#### 1.4 –°–µ—Ä–≤–∏—Å–Ω—ã–π —Å–ª–æ–π (3-4 —á–∞—Å–∞)
**–§–∞–π–ª**: `src/services/v1/issues.py`

**–ö–ª–∞—Å—Å**: `IssueService(BaseService)`

**–ú–µ—Ç–æ–¥—ã**:
- [ ] `create_issue(author_id: UUID, data: dict) -> IssueModel`
  - –í–∞–ª–∏–¥–∞—Ü–∏—è: title –Ω–µ –ø—É—Å—Ç–æ–π, category –¥–æ–ø—É—Å—Ç–∏–º–∞—è
  - –°–æ–∑–¥–∞–Ω–∏–µ —á–µ—Ä–µ–∑ `repository.create_item()`
  - –í–æ–∑–≤—Ä–∞—Ç `IssueModel` (–ù–ï schema!)

- [ ] `resolve_issue(issue_id: UUID, solution: str, user_id: UUID) -> IssueModel`
  - –ü—Ä–æ–≤–µ—Ä–∫–∞: –ø—Ä–æ–±–ª–µ–º–∞ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
  - –ü—Ä–æ–≤–µ—Ä–∫–∞: —Å—Ç–∞—Ç—É—Å RED (–∏–Ω–∞—á–µ `IssueAlreadyResolvedError`)
  - –ü—Ä–æ–≤–µ—Ä–∫–∞: user_id == author_id (–∏–ª–∏ admin)
  - –í—ã–∑–æ–≤ `repository.resolve_issue()`

- [ ] `get_issue(issue_id: UUID) -> IssueModel`
  - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `repository.get_item_by_id()`
  - –ï—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ ‚Üí `IssueNotFoundError`

- [ ] `list_issues(filters: IssueQuerySchema) -> List[IssueModel]`
  - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ status, category, author
  - –ü–æ–∏—Å–∫ –ø–æ —Ç–µ–∫—Å—Ç—É (–µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω)

- [ ] `get_history(limit: int = 100) -> List[IssueModel]`
  - –¢–æ–ª—å–∫–æ resolved (status GREEN)
  - –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ `resolved_at DESC`

**–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞**:
- –¢–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä –º–æ–∂–µ—Ç —Ä–µ—à–∏—Ç—å —Å–≤–æ—é –ø—Ä–æ–±–ª–µ–º—É (–∏–ª–∏ admin)
- –ù–µ–ª—å–∑—è –ø–æ–≤—Ç–æ—Ä–Ω–æ —Ä–µ—à–∏—Ç—å —É–∂–µ —Ä–µ—à–µ–Ω–Ω—É—é –ø—Ä–æ–±–ª–µ–º—É
- –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å –≤—Å–µ–≥–¥–∞ RED

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: 1.2 (—Å—Ö–µ–º—ã), 1.3 (—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π)

---

#### 1.5 HTTP Router (2-3 —á–∞—Å–∞)
**–§–∞–π–ª**: `src/routers/v1/issues.py`

**–ö–ª–∞—Å—Å**: `IssueRouter(BaseRouter)`

**Endpoints**:

```python
POST /api/v1/issues
# –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –ø—Ä–æ–±–ª–µ–º—ã (—Ç—Ä–µ–±—É–µ—Ç—Å—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è)
# Request: IssueCreateSchema
# Response: IssueResponseSchema (—Å IssueDetailSchema)
# Auth: –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞ (–ø–æ–ª—É—á–∏—Ç—å user_id –∏–∑ —Ç–æ–∫–µ–Ω–∞)

GET /api/v1/issues
# –°–ø–∏—Å–æ–∫ –ø—Ä–æ–±–ª–µ–º —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
# Query params: status (red/green/all), category, search, author_id
# Response: IssueListResponseSchema
# Auth: –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞ (–ø—É–±–ª–∏—á–Ω–æ–µ —á—Ç–µ–Ω–∏–µ)

GET /api/v1/issues/{id}
# –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–±–ª–µ–º–µ
# Response: IssueResponseSchema
# Auth: –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞

PATCH /api/v1/issues/{id}/resolve
# –û—Ç–º–µ—Ç–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É –∫–∞–∫ —Ä–µ—à–µ–Ω–Ω—É—é
# Request: IssueResolveSchema (solution)
# Response: IssueResponseSchema
# Auth: –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞ (—Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä –∏–ª–∏ admin)

GET /api/v1/issues/history
# –ò—Å—Ç–æ—Ä–∏—è —Ä–µ—à–µ–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º
# Query: limit (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 100)
# Response: IssueListResponseSchema (—Ç–æ–ª—å–∫–æ GREEN)
# Auth: –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞
```

**–í–∞–∂–Ω–æ**:
- –†–æ—É—Ç–µ—Ä –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç `IssueModel` ‚Üí `IssueDetailSchema` —á–µ—Ä–µ–∑ `.model_validate()`
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `AuthServiceDep` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è `current_user`
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —á–µ—Ä–µ–∑ –≥–ª–æ–±–∞–ª—å–Ω—ã–π handler

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: 1.4 (—Å–µ—Ä–≤–∏—Å), 1.2 (—Å—Ö–µ–º—ã)

---

#### 1.6 Dependency Injection (30 –º–∏–Ω—É—Ç)
**–§–∞–π–ª**: `src/core/dependencies/issues.py`

```python
async def get_issue_service(
    session: AsyncSessionDep,
) -> IssueService:
    return IssueService(session=session)

IssueServiceDep = Annotated[IssueService, Depends(get_issue_service)]
```

**–û–±–Ω–æ–≤–∏—Ç—å**: `src/core/dependencies/__init__.py` (–¥–æ–±–∞–≤–∏—Ç—å —ç–∫—Å–ø–æ—Ä—Ç)

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: 1.4 (—Å–µ—Ä–≤–∏—Å)

---

#### 1.7 –ö–∞—Å—Ç–æ–º–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è (1 —á–∞—Å)
**–§–∞–π–ª**: `src/core/exceptions/issues.py`

```python
class IssueNotFoundError(BaseNotFoundError):
    """–ü—Ä–æ–±–ª–µ–º–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞."""
    def __init__(self, issue_id: UUID):
        super().__init__(f"–ü—Ä–æ–±–ª–µ–º–∞ —Å ID {issue_id} –Ω–µ –Ω–∞–π–¥–µ–Ω–∞")

class IssueAlreadyResolvedError(BaseBusinessError):
    """–ü—Ä–æ–±–ª–µ–º–∞ —É–∂–µ —Ä–µ—à–µ–Ω–∞."""
    def __init__(self, issue_id: UUID):
        super().__init__(f"–ü—Ä–æ–±–ª–µ–º–∞ {issue_id} —É–∂–µ –æ—Ç–º–µ—á–µ–Ω–∞ –∫–∞–∫ —Ä–µ—à—ë–Ω–Ω–∞—è")

class UnauthorizedIssueAccessError(BaseAuthError):
    """–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤ –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –ø—Ä–æ–±–ª–µ–º–æ–π."""
    def __init__(self):
        super().__init__("–¢–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä –º–æ–∂–µ—Ç —Ä–µ—à–∏—Ç—å —ç—Ç—É –ø—Ä–æ–±–ª–µ–º—É")
```

**–û–±–Ω–æ–≤–∏—Ç—å**: `src/core/exceptions/__init__.py` (–¥–æ–±–∞–≤–∏—Ç—å —ç–∫—Å–ø–æ—Ä—Ç—ã)

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: –ù–µ—Ç

---

#### 1.8 –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î (30 –º–∏–Ω—É—Ç)
**–ö–æ–º–∞–Ω–¥–∞**: `uv run alembic revision --autogenerate -m "add_issues_table"`

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é**:
- –¢–∞–±–ª–∏—Ü–∞ `issues` —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏
- Foreign Key `author_id ‚Üí users.id` —Å `ON DELETE CASCADE`
- Index –Ω–∞ `status`, `category`, `author_id`
- Enum –¥–ª—è `status` (red/green)

**–ü—Ä–∏–º–µ–Ω–∏—Ç—å**: `uv run alembic upgrade head`

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: 1.1 (–º–æ–¥–µ–ª–∏)

---

#### 1.9 –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ä–æ—É—Ç–µ—Ä–∞ (15 –º–∏–Ω—É—Ç)
**–§–∞–π–ª**: `src/routers/main.py`

```python
from src.routers.v1.issues import IssueRouter

issue_router = IssueRouter()
app.include_router(issue_router.router, prefix="/api/v1")
```

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: 1.5 (—Ä–æ—É—Ç–µ—Ä)

---

#### 1.10 –ë–∞–∑–æ–≤–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (2-3 —á–∞—Å–∞)
**–§–∞–π–ª**: `tests/test_issues.py`

**–¢–µ—Å—Ç-–∫–µ–π—Å—ã**:
- [ ] `test_create_issue_success` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ —Å –≤–∞–ª–∏–¥–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- [ ] `test_create_issue_unauthorized` ‚Äî –±–µ–∑ —Ç–æ–∫–µ–Ω–∞ ‚Üí 401
- [ ] `test_get_issues_list` ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ (–ø—É–±–ª–∏—á–Ω–æ)
- [ ] `test_get_issue_by_id` ‚Äî –¥–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- [ ] `test_resolve_issue_as_author` ‚Äî –∞–≤—Ç–æ—Ä —Ä–µ—à–∞–µ—Ç —Å–≤–æ—é –ø—Ä–æ–±–ª–µ–º—É
- [ ] `test_resolve_issue_as_non_author` ‚Äî –¥—Ä—É–≥–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí 403
- [ ] `test_resolve_already_resolved` ‚Äî –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ ‚Üí 400
- [ ] `test_get_history` ‚Äî —Ç–æ–ª—å–∫–æ —Ä–µ—à–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
- [ ] `test_search_issues` ‚Äî –ø–æ–∏—Å–∫ –ø–æ —Ç–µ–∫—Å—Ç—É

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: 1.1-1.9 (–≤—Å—è —Ñ–∞–∑–∞ 1)

---

### –§–∞–∑–∞ 2: –£–ª—É—á—à–µ–Ω–∏—è –∏ –¥–æ—Ä–∞–±–æ—Ç–∫–∏ ‚Äî 1-2 –¥–Ω—è

#### 2.1 –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –∫–∞–∫ Enum (1 —á–∞—Å)
**–§–∞–π–ª**: `src/models/v1/issues.py`

```python
class IssueCategory(str, Enum):
    HARDWARE = "hardware"     # –û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ
    SOFTWARE = "software"     # –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ
    PROCESS = "process"       # –ü—Ä–æ—Ü–µ—Å—Å—ã –∏ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã
    SAFETY = "safety"         # –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
    OTHER = "other"           # –ü—Ä–æ—á–µ–µ
```

**–û–±–Ω–æ–≤–∏—Ç—å**: `IssueModel.category` –Ω–∞ `Mapped[IssueCategory]`

---

#### 2.2 –ü–∞–≥–∏–Ω–∞—Ü–∏—è –¥–ª—è —Å–ø–∏—Å–∫–æ–≤ (2 —á–∞—Å–∞)
**–§–∞–π–ª**: `src/repository/v1/issues.py`

```python
async def get_paginated(
    self,
    page: int = 1,
    per_page: int = 20,
    filters: dict = None
) -> Tuple[List[IssueModel], int]:
    """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç (—Å–ø–∏—Å–æ–∫, –æ–±—â–µ–µ_–∫–æ–ª-–≤–æ)"""
```

**–û–±–Ω–æ–≤–∏—Ç—å**: `IssueListResponseSchema` —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏

---

#### 2.3 –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –¥–∞—Ç–∞–º (1 —á–∞—Å)
**–î–æ–±–∞–≤–∏—Ç—å –≤ `IssueQuerySchema`**:
- `created_after: Optional[datetime]`
- `created_before: Optional[datetime]`
- `resolved_after: Optional[datetime]`

---

#### 2.4 Endpoint –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ (2 —á–∞—Å–∞)
**–ù–æ–≤—ã–π endpoint**: `GET /api/v1/issues/stats`

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç**:
```json
{
  "total": 150,
  "red": 12,
  "green": 138,
  "by_category": {
    "hardware": 45,
    "software": 78,
    "process": 27
  },
  "avg_resolution_time": "2h 34m"
}
```

---

#### 2.5 –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –ø—Ä–æ–±–ª–µ–º–∞–º (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, 3-4 —á–∞—Å–∞)
**–ï—Å–ª–∏ –µ—Å—Ç—å –≤—Ä–µ–º—è**:
- –ú–æ–¥–µ–ª—å `IssueCommentModel`
- Endpoint `POST /api/v1/issues/{id}/comments`
- Endpoint `GET /api/v1/issues/{id}/comments`

---

### –§–∞–∑–∞ 3: Docker –∏ –¥–µ–ø–ª–æ–π ‚Äî 1 –¥–µ–Ω—å

#### 3.1 –û–±–Ω–æ–≤–∏—Ç—å docker-compose.yml (30 –º–∏–Ω—É—Ç)
**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å**:
- –°–µ—Ä–≤–∏—Å—ã: `postgres`, `redis`, `backend`
- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–∑ `.env.dev`
- Volumes –¥–ª—è –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö
- Healthchecks –¥–ª—è —Å–µ—Ä–≤–∏—Å–æ–≤

---

#### 3.2 Seed-–¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (1 —á–∞—Å)
**–§–∞–π–ª**: `scripts/seed_data.py`

**–°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ**:
- 2-3 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (admin, user)
- 10-15 –ø—Ä–æ–±–ª–µ–º (—Å–º–µ—Å—å RED –∏ GREEN)
- –†–∞–∑–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- –†–∞–∑–Ω—ã–µ –¥–∞—Ç—ã —Å–æ–∑–¥–∞–Ω–∏—è

**–ö–æ–º–∞–Ω–¥–∞**: `uv run python scripts/seed_data.py`

---

#### 3.3 README —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏ (1 —á–∞—Å)
**–û–±–Ω–æ–≤–∏—Ç—å `README.md`**:
- –°–µ–∫—Ü–∏—è –ø—Ä–æ Issues API
- –ü—Ä–∏–º–µ—Ä—ã cURL –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- Swagger UI: `http://localhost:8000/docs`

---

#### 3.4 Postman/Insomnia –∫–æ–ª–ª–µ–∫—Ü–∏—è (1 —á–∞—Å)
**–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–ª–ª–µ–∫—Ü–∏—é**:
- –í—Å–µ endpoints Issues
- Pre-request scripts –¥–ª—è —Ç–æ–∫–µ–Ω–∞
- –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

---

### –§–∞–∑–∞ 4: –ü—Ä–æ—Å—Ç–æ–π —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, 2-3 –¥–Ω—è)

#### 4.1 –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π HTML + HTMX (–≤–∞—Ä–∏–∞–Ω—Ç 1, 4-6 —á–∞—Å–æ–≤)
**–§–∞–π–ª**: `frontend/index.html`

**–°—Ç—Ä–∞–Ω–∏—Ü—ã**:
- –ì–ª–∞–≤–Ω–∞—è: —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–±–ª–µ–º —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
- –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã: —Ñ–æ—Ä–º–∞
- –î–µ—Ç–∞–ª—å–Ω–∞—è: –ø—Ä–æ—Å–º–æ—Ç—Ä + –∫–Ω–æ–ø–∫–∞ "–†–µ—à–∏—Ç—å"
- –ò—Å—Ç–æ—Ä–∏—è: –≤—Å–µ —Ä–µ—à–µ–Ω–Ω—ã–µ

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏**:
- HTMX –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- Alpine.js –¥–ª—è –ø—Ä–æ—Å—Ç–æ–π –ª–æ–≥–∏–∫–∏
- Tailwind CSS –¥–ª—è —Å—Ç–∏–ª–µ–π
- FastAPI —Å–ª—É–∂–∏—Ç —Å—Ç–∞—Ç–∏–∫—É —á–µ—Ä–µ–∑ `StaticFiles`

---

#### 4.2 Next.js –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–≤–∞—Ä–∏–∞–Ω—Ç 2, 2-3 –¥–Ω—è)
**–ï—Å–ª–∏ –Ω—É–∂–µ–Ω –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π UI**:
- App Router
- Server Components –¥–ª—è SEO
- TanStack Query –¥–ª—è API
- Shadcn/ui –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- Deploy –Ω–∞ Vercel (–±–µ—Å–ø–ª–∞—Ç–Ω–æ)

---

## üìä –û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏

| –§–∞–∑–∞ | –í—Ä–µ–º—è | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç |
|------|-------|-----------|
| 1. –Ø–¥—Ä–æ —Å–∏—Å—Ç–µ–º—ã –ø—Ä–æ–±–ª–µ–º (Issues) | 2-3 –¥–Ω—è | üî¥ –ö—Ä–∏—Ç–∏—á–Ω–æ |
| 1.5. Visibility (PUBLIC/PRIVATE) | 2-3 —á–∞—Å–∞ | üü° –í–∞–∂–Ω–æ |
| 2. –®–∞–±–ª–æ–Ω—ã (Templates) | 1-1.5 –¥–Ω—è | ÔøΩ –í—ã—Å–æ–∫–∏–π |
| 3. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ (Comments) | 1-1.5 –¥–Ω—è | ÔøΩ –í—ã—Å–æ–∫–∏–π |
| 4. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∏ —Ç–µ—Å—Ç—ã | 3-4 —á–∞—Å–∞ | ÔøΩ –°—Ä–µ–¥–Ω–∏–π |

**–ò—Ç–æ–≥–æ MVP**: 4.5-6 –¥–Ω–µ–π (–±—ã–ª–æ 2-3 –¥–Ω—è)
**–î–æ–±–∞–≤–ª–µ–Ω–æ**: +2.5-3 –¥–Ω—è –Ω–∞ visibility, —à–∞–±–ª–æ–Ω—ã, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
**–í—Å–µ–≥–æ –∑–∞–¥–∞—á**: ~25 issues (–±—ã–ª–æ 10)

---

## üéØ –ß—Ç–æ –≤—Ö–æ–¥–∏—Ç –∏ –ù–ï –≤—Ö–æ–¥–∏—Ç –≤ MVP

### ‚úÖ –í–•–û–î–ò–¢ –≤ MVP (–æ–±–Ω–æ–≤–ª–µ–Ω–æ 2025-11-04):
- ‚úÖ **Issues** ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ, —Ä–µ—à–µ–Ω–∏–µ, –∏—Å—Ç–æ—Ä–∏—è –ø—Ä–æ–±–ª–µ–º
- ‚úÖ **Visibility** ‚Äî PUBLIC/PRIVATE –ø—Ä–æ–±–ª–µ–º—ã (–¥–æ—Å—Ç—É–ø –±–µ–∑ –∫–æ–º–∞–Ω–¥)
- ‚úÖ **–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏** ‚Äî –æ–±—Å—É–∂–¥–µ–Ω–∏–µ, –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ —Ä–µ—à–µ–Ω–∏–π, –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã
- ‚úÖ **–®–∞–±–ª–æ–Ω—ã** ‚Äî –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º—ã —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º–∏ –ø–æ–ª—è–º–∏ (JSONB)
- ‚úÖ **–ò–∑–±—Ä–∞–Ω–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã** ‚Äî –±—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø, —à–∞–±–ª–æ–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- ‚úÖ **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** ‚Äî JWT (—É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)
- ‚úÖ **–ü–æ–∏—Å–∫** ‚Äî –ø–æ —Ç–µ–∫—Å—Ç—É, –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º, —Å—Ç–∞—Ç—É—Å—É, visibility

### ‚ùå –ù–ï –í–•–û–î–ò–¢ –≤ MVP (–æ—Ç–ª–æ–∂–µ–Ω–æ):
- ‚ùå **–ö–æ–º–∞–Ω–¥—ã (teams)** ‚Äî –±—É–¥–µ—Ç –≤ v0.2
- ‚ùå **–ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π** ‚Äî –±—É–¥–µ—Ç –≤ v0.2 (–≤—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
- ‚ùå **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (email/Slack)** ‚Äî –±—É–¥–µ—Ç –≤ v0.2
- ‚ùå **MCP-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å LLM** ‚Äî –±—É–¥–µ—Ç –≤ v0.3
- ‚ùå **–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ (ACL)** ‚Äî –±—É–¥–µ—Ç –≤ v0.2 (—Å –∫–æ–º–∞–Ω–¥–∞–º–∏)
- ‚ùå **–≠–∫—Å–ø–æ—Ä—Ç –≤ CSV/JSON** ‚Äî –±—É–¥–µ—Ç –≤ v0.2
- ‚ùå **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –≥—Ä–∞—Ñ–∏–∫–∏** ‚Äî –±—É–¥–µ—Ç –≤ v0.3

üìÑ **–î–µ—Ç–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: –°–º. `MVP_EXTENDED_PLAN.md` –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –æ–ø–∏—Å–∞–Ω–∏—è –º–æ–¥–µ–ª–µ–π, API endpoints –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã.

---

## üîú Roadmap –ø–æ—Å–ª–µ MVP

### v0.2 ‚Äî –ö–æ–º–∞–Ω–¥—ã –∏ —Ñ–∞–π–ª—ã (1-2 –Ω–µ–¥–µ–ª–∏)
- –ú–æ–¥–µ–ª—å `TeamModel` –∏ `TeamMemberModel`
- Visibility.TEAM ‚Äî –ø—Ä–æ–±–ª–µ–º—ã —Ç–æ–ª—å–∫–æ –¥–ª—è –∫–æ–º–∞–Ω–¥—ã
- –ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è –≤ –∫–æ–º–∞–Ω–¥—ã, —Ä–æ–ª–∏ (owner, member, viewer)
- **–ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π** (MinIO, S3-—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π storage)
- Email-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ RED –∏ –Ω–æ–≤—ã—Ö –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö
- Webhook –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π

### v0.3 (–®–∞–±–ª–æ–Ω—ã –∏ LLM)
- –ú–æ–¥–µ–ª—å `TemplateModel` —Å JSON-–ø–æ–ª—è–º–∏
- MCP-endpoint –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø—Ä–æ–±–ª–µ–º
- AI-–ø–æ–∏—Å–∫ –ø–æ—Ö–æ–∂–∏—Ö —Ä–µ—à–µ–Ω–∏–π
- –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

### v0.4 (–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Ñ–∏—á–∏)
- –ü—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –∫ –ø—Ä–æ–±–ª–µ–º–∞–º
- –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π (audit log)
- –≠–∫—Å–ø–æ—Ä—Ç –≤ —Ä–∞–∑–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Jira/GitLab

---

## üõ† –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫ MVP

### Backend
- **Framework**: FastAPI 0.104+
- **ORM**: SQLAlchemy 2.0 (async)
- **DB**: PostgreSQL 16
- **Cache**: Redis 7
- **Auth**: JWT (python-jose)
- **Passwords**: Argon2 (passlib)
- **Migrations**: Alembic
- **Validation**: Pydantic v2
- **Package Manager**: UV

### Infrastructure
- **Container**: Docker + docker-compose
- **WSGI**: Uvicorn
- **Reverse Proxy**: Nginx (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- **SSL**: Let's Encrypt (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### Development
- **Linting**: Flake8, mypy
- **Formatting**: Black, isort
- **Testing**: pytest, pytest-asyncio
- **CI/CD**: GitHub Actions (–±—É–¥–µ—Ç –ø–æ–∑–∂–µ)

---

## üìù –ü—Ä–∞–≤–∏–ª–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
1. **–°—Ç—Ä–æ–≥–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å–ª–æ–µ–≤**: Router ‚Üí Service ‚Üí Repository ‚Üí Model
2. **Dependency Injection**: –≤—Å–µ–≥–¥–∞ —á–µ—Ä–µ–∑ `Depends()`, –Ω–∏–∫–æ–≥–¥–∞ –Ω–∞–ø—Ä—è–º—É—é
3. **Service –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–æ–¥–µ–ª–∏**: –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ —Å—Ö–µ–º—ã —Ç–æ–ª—å–∫–æ –≤ —Ä–æ—É—Ç–µ—Ä–µ
4. **–ò—Å–∫–ª—é—á–µ–Ω–∏—è –¥–æ–º–µ–Ω–∞**: —Å–æ–∑–¥–∞–≤–∞—Ç—å –∫–∞—Å—Ç–æ–º–Ω—ã–µ, –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å try-catch –≤ —Ä–æ—É—Ç–µ—Ä–∞—Ö

### –ö–æ–¥-—Å—Ç–∞–π–ª
1. **–†—É—Å—Å–∫–∏–µ docstrings**: –≤—Å–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏, –ª–æ–≥–∏, –æ—à–∏–±–∫–∏ –Ω–∞ —Ä—É—Å—Å–∫–æ–º
2. **Google Style**: –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∫–ª–∞—Å—Å–æ–≤ –∏ –º–µ—Ç–æ–¥–æ–≤
3. **Type hints**: –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã –¥–ª—è –≤—Å–µ—Ö –ø—É–±–ª–∏—á–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤
4. **Line length**: 88 —Å–∏–º–≤–æ–ª–æ–≤ (Black)

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
1. **UUID primary keys**: –Ω–∞ –≤—Å–µ—Ö –º–æ–¥–µ–ª—è—Ö —á–µ—Ä–µ–∑ `BaseModel`
2. **Relationships**: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `Mapped[]` —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ foreign keys
3. **Indexes**: –Ω–∞ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–æ–ª—è (status, category, author_id)
4. **Audit fields**: `created_at`, `updated_at` –æ—Ç `BaseModel`

### Git workflow
1. **Feature branches**: `feature/issues-crud`, `feature/pagination`
2. **Commits –Ω–∞ —Ä—É—Å—Å–∫–æ–º**: "–î–æ–±–∞–≤–ª–µ–Ω —Ä–æ—É—Ç–µ—Ä –¥–ª—è Issues"
3. **PR –ø–µ—Ä–µ–¥ –º–µ—Ä–∂–µ–º**: –¥–∞–∂–µ –µ—Å–ª–∏ –æ–¥–∏–Ω —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
4. **–ú–∏–≥—Ä–∞—Ü–∏–∏**: –∫–æ–º–º–∏—Ç–∏—Ç—å –≤–º–µ—Å—Ç–µ —Å –º–æ–¥–µ–ª—è–º–∏

---

## üß™ –ß–µ–∫-–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ —Ä–µ–ª–∏–∑–æ–º MVP

### Backend
- [ ] –í—Å–µ endpoints Issues —Ä–∞–±–æ—Ç–∞—é—Ç (POST, GET, PATCH)
- [ ] –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –¢–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä –º–æ–∂–µ—Ç —Ä–µ—à–∏—Ç—å —Å–≤–æ—é –ø—Ä–æ–±–ª–µ–º—É
- [ ] –ò—Å—Ç–æ—Ä–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–ª—å–∫–æ GREEN –ø—Ä–æ–±–ª–µ–º—ã
- [ ] –ü–æ–∏—Å–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ title –∏ description
- [ ] –ú–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] Seed-–¥–∞–Ω–Ω—ã–µ —Å–æ–∑–¥–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [ ] Swagger UI –¥–æ—Å—Ç—É–ø–µ–Ω (`/docs`)
- [ ] README –æ–±–Ω–æ–≤–ª–µ–Ω —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏
- [ ] –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∑–∞–ø—É—Å–∫—É —á–µ—Ä–µ–∑ Docker
- [ ] –ü—Ä–∏–º–µ—Ä—ã cURL –¥–ª—è –≤—Å–µ—Ö endpoints

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] Unit-—Ç–µ—Å—Ç—ã –¥–ª—è —Å–µ—Ä–≤–∏—Å–æ–≤
- [ ] Integration-—Ç–µ—Å—Ç—ã –¥–ª—è API
- [ ] Coverage > 70%
- [ ] –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç –≤ CI

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- [ ] JWT-—Ç–æ–∫–µ–Ω—ã –≤–∞–ª–∏–¥–∏—Ä—É—é—Ç—Å—è
- [ ] SQL-injection –∑–∞—â–∏—Ç–∞ (—á–µ—Ä–µ–∑ ORM)
- [ ] XSS-–∑–∞—â–∏—Ç–∞ (—á–µ—Ä–µ–∑ Pydantic)
- [ ] Rate limiting (—á–µ—Ä–µ–∑ middleware)

---

## ÔøΩ –û–±–Ω–æ–≤–ª–µ–Ω–∏—è MVP (–¥–æ–±–∞–≤–ª–µ–Ω–æ 2025-11-04)

### –ù–æ–≤—ã–µ —Ñ–∏—á–∏ –≤ MVP:

#### üîê Visibility (–í–∏–¥–∏–º–æ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º)
- **PUBLIC** ‚Äî –≤–∏–¥–Ω–æ –≤—Å–µ–º, –¥–∞–∂–µ –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (–±–∞–∑–∞ –∑–Ω–∞–Ω–∏–π —Å–æ–æ–±—â–µ—Å—Ç–≤–∞)
- **PRIVATE** ‚Äî —Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä (–ª–∏—á–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏, —á–µ—Ä–Ω–æ–≤–∏–∫–∏)
- **TEAM** ‚Äî —Ç–æ–ª—å–∫–æ –∫–æ–º–∞–Ω–¥–∞ (–±—É–¥–µ—Ç –≤ v0.2 –≤–º–µ—Å—Ç–µ —Å —Å–∏—Å—Ç–µ–º–æ–π –∫–æ–º–∞–Ω–¥)

#### üí¨ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
- –õ—é–±–æ–π –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –º–æ–∂–µ—Ç –∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å PUBLIC/PRIVATE –ø—Ä–æ–±–ª–µ–º—ã –∞–≤—Ç–æ—Ä–∞
- –ü–æ–ª–µ `is_solution` –¥–ª—è –æ—Ç–º–µ—Ç–∫–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è
- –í–ª–æ–∂–µ–Ω–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ (–æ—Ç–≤–µ—Ç—ã –Ω–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏)

#### üìã –®–∞–±–ª–æ–Ω—ã –ø—Ä–æ–±–ª–µ–º
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞—ë—Ç —Å–≤–æ–∏ —à–∞–±–ª–æ–Ω—ã –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —á—É–∂–∏–µ
- –ò–∑–±—Ä–∞–Ω–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã ‚Äî –±—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø
- –®–∞–±–ª–æ–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –ø–æ–ª—è –≤ JSONB (–≥–∏–±–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞)

### –û–±–Ω–æ–≤–ª—ë–Ω–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ MVP:
- **–ë—ã–ª–æ**: 2-3 –¥–Ω—è (10 –∑–∞–¥–∞—á)
- **–°—Ç–∞–ª–æ**: 4-5 –¥–Ω–µ–π (20+ –∑–∞–¥–∞—á)
- **–î–æ–±–∞–≤–ª–µ–Ω–æ**: +2 –¥–Ω—è –Ω–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏, visibility, —à–∞–±–ª–æ–Ω—ã

---

## ÔøΩüöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è MVP

```bash
# 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/mikey-semy/equiply-backend.git
cd equiply-backend

# 2. –°–æ–∑–¥–∞—Ç—å .env.dev –∏–∑ –ø—Ä–∏–º–µ—Ä–∞
cp .env.example .env.dev

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É
uv run infra-test

# 4. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
uv run migrate

# 5. –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
uv run python scripts/seed_data.py

# 6. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
uv run dev

# 7. –û—Ç–∫—Ä—ã—Ç—å Swagger UI
# http://localhost:8000/docs
```

---

## üìû –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ù–∞—á–∞—Ç—å —Å –§–∞–∑—ã 1.1** ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –º–æ–¥–µ–ª–µ–π
2. **–ö–æ–º–º–∏—Ç–∏—Ç—å —á–∞—Å—Ç–æ** ‚Äî –∫–∞–∂–¥–∞—è –∑–∞–¥–∞—á–∞ = –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–æ–º–º–∏—Ç
3. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ —Ö–æ–¥—É** ‚Äî –Ω–µ –Ω–∞–∫–∞–ø–ª–∏–≤–∞—Ç—å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –¥–æ–ª–≥
4. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥** ‚Äî –±—É–¥—É—â–∏–π —Ç—ã —Å–∫–∞–∂–µ—Ç —Å–ø–∞—Å–∏–±–æ
5. **–ó–∞–ø—Ä–æ—Å–∏—Ç—å —Ä–µ–≤—å—é** ‚Äî –¥–∞–∂–µ —É —Å–µ–±—è —á–µ—Ä–µ–∑ –¥–µ–Ω—å üòä

---

**–í–µ—Ä—Å–∏—è –ø–ª–∞–Ω–∞**: 1.0
**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è**: 2025-01-04
**–ê–≤—Ç–æ—Ä**: GitHub Copilot + mikey-semy
