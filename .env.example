# ============================================
# Application Settings
# ============================================
APP_NAME="Norake Backend API"
APP_VERSION="0.1.0"
LOG_LEVEL=INFO
API_PORT=8000

# ============================================
# Security Settings
# ============================================
TOKEN_SECRET_KEY=note_your_secret_key_here
DOCS_PASSWORD=your_docs_password_here

# ============================================
# PostgreSQL Database
# ============================================
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_USER=postgres
POSTGRES_PASSWORD=your_secure_password_here
POSTGRES_DATABASE=norake_db

# ============================================
# Redis Cache
# ============================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=your_redis_password_here

# ============================================
# RabbitMQ Messaging
# ============================================
RABBITMQ_CONNECTION_TIMEOUT=30
RABBITMQ_EXCHANGE=norake_exchange
RABBITMQ_USER=admin
RABBITMQ_PASS=your_rabbitmq_password_here
RABBITMQ_HOST=localhost
RABBITMQ_PORT=5673

# ============================================
# CORS Settings
# ============================================
CORS_ORIGINS=http://localhost:3000,https://equiply.ru

# ============================================
# Cookie Settings (для cross-site авторизации)
# ============================================
# Для localhost разработки (HTTP):
# COOKIE_SAMESITE=None
# COOKIE_SECURE=False
# COOKIE_HTTPONLY=True
# COOKIE_DOMAIN=  (пусто для cross-origin)

# Для production (HTTPS):
# COOKIE_SAMESITE=None
# COOKIE_SECURE=True
# COOKIE_HTTPONLY=True
# COOKIE_DOMAIN=  (пусто или .equiply.ru)

COOKIE_SAMESITE=None
COOKIE_SECURE=False
COOKIE_HTTPONLY=True

# ============================================
# Alembic Migrations
# ============================================
# Миграции запускаются автоматически в docker-entrypoint.sh
# Для ручного запуска: alembic upgrade head

# ============================================
# OpenRouter AI Integration
# ============================================
# Получить ключ: https://openrouter.ai/keys
OPENROUTER_API_KEY=your_openrouter_api_key_here
OPENROUTER_BASE_URL=https://openrouter.ai/api/v1
OPENROUTER_TIMEOUT=30
OPENROUTER_MAX_RETRIES=3

# Embeddings Configuration
# ВНИМАНИЕ: OpenRouter НЕ поддерживает embedding модели!
# Используется Ollama Docker с локальными моделями

# Ollama Embeddings (локально через Docker, бесплатно):
OLLAMA_EMBEDDINGS_BASE_URL=your_ollama_url_here
OLLAMA_EMBEDDINGS_API_KEY=your_ollama_api_key_here
OLLAMA_EMBEDDING_MODEL=mxbai-embed-large
OLLAMA_EMBEDDING_DIMENSIONS=1024

# Доступные модели Ollama:
# - mxbai-embed-large (669 MB, 1024 dimensions) - высокое качество
# - nomic-embed-text (274 MB, 768 dimensions) - компактная версия

# Доступные бесплатные модели для чатов (см. docs/RAG_CHAT_FREE_MODELS.md):
# - qwen_coder: Code review, debugging, refactoring (32K context, temp 0.2)
# - kimi_dev: Long documents, general chat (200K context, temp 0.5)
# - deepseek_r1: Complex reasoning, research (64K context, temp 0.5)
# - tongyi_research: Scientific writing, technical analysis (32K context, temp 0.3)
# - deepseek_v3: Fast responses, simple queries (64K context, temp 0.7)
OPENROUTER_DEFAULT_CHAT_MODEL=qwen_coder

# ============================================
# RAG (Retrieval-Augmented Generation) Configuration
# ============================================
# Оптимальный размер чанка для embeddings (баланс между контекстом и релевантностью)
RAG_CHUNK_SIZE=1500

# Перекрытие между чанками (предотвращает потерю контекста на границах)
RAG_CHUNK_OVERLAP=200

# Максимум чанков возвращаемых из RAG поиска
RAG_SEARCH_LIMIT=10

# ============================================
# N8N Integration (Optional)
# ============================================
N8N_API_KEY=your_n8n_api_key_here
N8N_SMART_SEARCH_WEBHOOK=

# ============================================
# AWS S3 / MinIO Storage
# ============================================
# Development (MinIO):
AWS_ENDPOINT=http://localhost:9000
AWS_ACCESS_KEY_ID=minioadmin
AWS_SECRET_ACCESS_KEY=minioadmin
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=minioadmin

# Production (AWS S3 / Yandex Cloud) - раскомментируй и настрой:
# AWS_ENDPOINT=
# AWS_ACCESS_KEY_ID=your_aws_access_key
# AWS_SECRET_ACCESS_KEY=your_aws_secret_key
# AWS_REGION=eu-central-1

# Для Yandex Cloud Storage:
# AWS_ENDPOINT=https://storage.yandexcloud.net
# AWS_REGION=ru-central1
# AWS_ACCESS_KEY_ID=YCAJExxxxxxxxxx
# AWS_SECRET_ACCESS_KEY=YCxxxxxxxxxxxxxxxxxxxxxxxxxx

# Общие настройки:
AWS_BUCKET_NAME=equiply-documents
AWS_PRESIGNED_URL_EXPIRATION=3600
# AWS_ADDRESSING_STYLE не используется - определяется автоматически через signature_version='s3v4'

# ============================================
# Document Services Configuration
# ============================================
# 50 MB в байтах:
DOCUMENT_MAX_FILE_SIZE=52428800
DOCUMENT_BASE_URL=http://localhost:8000

# ============================================
# Docker/Production Specific
# ============================================
UVICORN_PORT=8000
